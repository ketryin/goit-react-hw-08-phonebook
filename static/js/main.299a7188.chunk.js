(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{15:function(t,e,n){t.exports={form:"Form_form__khQEQ",btn:"Form_btn__3A_F9",input:"Form_input__bwtTB"}},29:function(t,e,n){t.exports={contact:"ContactsList_contact__2aiy9",btn:"ContactsList_btn__3mdln"}},33:function(t,e,n){t.exports={contact:"Filter_contact__EdPIB"}},44:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n(19),a=n.n(r),s=n(4),u=n(13),i=(n(44),n(9)),o=n(24),l=n(5),j={isAuthorized:function(t){return t.contactsReducer.auth.isAuthorized},authToken:function(t){return t.contactsReducer.auth.token},currentUser:function(t){return t.contactsReducer.auth.currentUser},authError:function(t){return t.contactsReducer.auth.authError}},b=n(0),d=["children"],O=["children","restricted"];function h(t){var e=t.children,n=Object(o.a)(t,d),c=Object(s.c)(j.isAuthorized);return Object(b.jsx)(l.b,Object(i.a)(Object(i.a)({},n),{},{children:c?e:Object(b.jsx)(l.a,{to:"/login"})}))}function f(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=Object(o.a)(t,O),a=Object(s.c)(j.isAuthorized),u=c&&a;return Object(b.jsx)(l.b,Object(i.a)(Object(i.a)({},r),{},{children:u?Object(b.jsx)(l.a,{to:"/"}):e}))}var m=function(){var t=Object(s.c)(j.currentUser);return Object(b.jsx)("div",{children:t?Object(b.jsxs)("h1",{children:["Hello, ",t.name]}):Object(b.jsx)("h1",{children:"Authenticate in app in order to work with contacts"})})},p=n(11),x=n(2),g=Object(x.b)("auth/registerPending"),v=Object(x.b)("auth/registerSuccess"),N=Object(x.b)("auth/registerError"),E=Object(x.b)("auth/loginPending"),y=Object(x.b)("auth/loginSuccess"),w=Object(x.b)("auth/loginError"),C=Object(x.b)("auth/logoutPending"),k=Object(x.b)("auth/logoutSuccess"),S=Object(x.b)("auth/logoutError"),I=n(27),T=n.n(I),A=n(32),F="https://connections-api.herokuapp.com";function L(t){return P.apply(this,arguments)}function P(){return(P=Object(A.a)(T.a.mark((function t(e){var n,c,r,a,s=arguments;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},c=s.length>2?s[2]:void 0,r=Object(i.a)(Object(i.a)({},n),{headers:{"Content-Type":"application/json",Authorization:c}}),t.next=5,fetch(e,r);case 5:if(!(a=t.sent).ok){t.next=10;break}return t.next=9,a.json();case 9:return t.abrupt("return",t.sent);case 10:throw new Error("API failed with status ".concat(a.statusText," during executing request."));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var _=function(t){return function(e){return e(g()),function(t){return L("".concat(F,"/users/signup"),{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return e(v(t))})).catch((function(t){return e(N(t.message))}))}},R=function(t){return function(e){return e(E()),function(t){return L("".concat(F,"/users/login"),{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return e(y(t))})).catch((function(t){return e(w(t.message))}))}},z=function(t){return function(e){return e(C()),function(t){return L("".concat(F,"/users/logout"),{method:"POST"},t)}(t).then((function(t){return e(k())})).catch((function(t){return e(S(t.message))}))}};n(51);var U=function(){var t=Object(c.useState)(""),e=Object(p.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(""),u=Object(p.a)(a,2),i=u[0],o=u[1],l=Object(s.c)(j.authError),d=Object(s.b)();return Object(b.jsxs)("div",{className:"registrationForm",children:[Object(b.jsxs)("div",{className:"containerRegistrationForm",children:[Object(b.jsx)("div",{className:"wrapLoginTitle",children:Object(b.jsx)("span",{className:"loginTitle",children:"Login"})}),Object(b.jsxs)("form",{className:"loginForm",children:[Object(b.jsxs)("div",{className:"wrapInput validate-input ","data-validate":"Username is required",children:[Object(b.jsx)("span",{className:"labelInput",children:"Email"}),Object(b.jsx)("input",{className:"inputLogin",type:"email",name:"username",placeholder:"Enter email",value:n,onChange:function(t){return r(t.currentTarget.value)}}),Object(b.jsx)("span",{className:"focusInput"})]}),Object(b.jsxs)("div",{className:"wrapInput validateInput m-b-18","data-validate":"Password is required",children:[Object(b.jsx)("span",{className:"labelInput",children:"Password"}),Object(b.jsx)("input",{className:"inputLogin",type:"password",name:"pass",placeholder:"Enter password",value:i,onChange:function(t){return o(t.currentTarget.value)}}),Object(b.jsx)("span",{className:"focusInput"})]}),Object(b.jsx)("button",{className:"loginBtn",onClick:function(t){t.preventDefault(),d(R({email:n,password:i})),r(""),o("")},children:"Login"})]})]}),l&&Object(b.jsxs)("div",{children:[" Error : ",l," "]})]})};var q=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(U,{})})};n(52);var D=function(){var t=Object(c.useState)(""),e=Object(p.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(""),u=Object(p.a)(a,2),i=u[0],o=u[1],l=Object(c.useState)(""),d=Object(p.a)(l,2),O=d[0],h=d[1],f=Object(s.c)(j.authError),m=Object(s.b)();return Object(b.jsx)("div",{className:"registrationForm",children:Object(b.jsxs)("div",{className:"containerRegistrationForm",children:[Object(b.jsx)("div",{className:"wrapLoginTitle",children:Object(b.jsx)("div",{className:"loginTitleImg",children:Object(b.jsx)("span",{className:"loginTitle",children:"Register"})})}),Object(b.jsxs)("form",{className:"loginForm",children:[Object(b.jsxs)("div",{className:"wrapInput validate-input ","data-validate":"Username is required",children:[Object(b.jsx)("span",{className:"labelInput",children:"Email"}),Object(b.jsx)("input",{className:"inputLogin",type:"email",name:"username",placeholder:"Enter email",value:i,onChange:function(t){return o(t.currentTarget.value)}}),Object(b.jsx)("span",{className:"focusInput"})]}),Object(b.jsxs)("div",{className:"wrapInput validate-input ","data-validate":"Username is required",children:[Object(b.jsx)("span",{className:"labelInput",children:"Username"}),Object(b.jsx)("input",{className:"inputLogin",type:"text",name:"username",placeholder:"Enter username",value:n,onChange:function(t){return r(t.currentTarget.value)}}),Object(b.jsx)("span",{className:"focusInput"})]}),Object(b.jsxs)("div",{className:"wrapInput validateInput m-b-18","data-validate":"Password is required",children:[Object(b.jsx)("span",{className:"labelInput",children:"Password"}),Object(b.jsx)("input",{className:"inputLogin",type:"password",name:"pass",placeholder:"Enter password",value:O,onChange:function(t){return h(t.currentTarget.value)}}),Object(b.jsx)("span",{className:"focusInput"})]}),Object(b.jsx)("button",{className:"loginBtn",onClick:function(t){t.preventDefault(),m(_({name:n,email:i,password:O})),r(""),o(""),h("")},children:"Register"})]}),f&&Object(b.jsxs)("div",{children:[" Error : ",f," "]})]})})};var B=function(){return Object(b.jsx)(D,{})},J=n(64),Z=n(28),M=n.n(Z),Q=n(15),H=n.n(Q);var $=function(t){var e=t.onSubmit,n=Object(c.useState)(""),r=Object(p.a)(n,2),a=r[0],s=r[1],u=Object(c.useState)(""),i=Object(p.a)(u,2),o=i[0],l=i[1],j=M.a.generate(),d=M.a.generate(),O=function(t,e){e(t.currentTarget.value)},h=function(){s(""),l("")};return Object(b.jsxs)("form",{className:H.a.form,onSubmit:function(t){t.preventDefault(),e({id:Object(J.a)(),name:a,number:o}),h()},children:[Object(b.jsxs)("label",{htmlFor:j,className:H.a.label,children:["Name",Object(b.jsx)("input",{className:H.a.input,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,id:j,onChange:function(t){return O(t,s)},value:a})]}),Object(b.jsxs)("label",{htmlFor:d,children:["Phone number",Object(b.jsx)("input",{className:H.a.input,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:function(t){return O(t,l)},value:o})]}),Object(b.jsx)("button",{className:H.a.btn,type:"submit",children:"Add contact"})]})},G=n(29),K=n.n(G);var V=function(t){var e=t.contacts,n=t.onDeleteContact;return Object(b.jsx)("ul",{children:e.map((function(t){var e=t.id,c=t.name,r=t.number;return Object(b.jsxs)("li",{className:K.a.contact,children:[c,": ",r,Object(b.jsx)("button",{className:K.a.btn,type:"button",onClick:function(){return n(e)},children:"Delete"})]},e)}))})},W=n(33),X=n.n(W),Y=function(t){var e=t.filter,n=t.handleFilter;return Object(b.jsx)("input",{className:X.a.contact,value:e,onChange:n})},tt=Object(x.b)("contacts/getAllPending"),et=Object(x.b)("contacts/getAllSuccess"),nt=Object(x.b)("contacts/getAllError"),ct=Object(x.b)("contacts/addPending"),rt=Object(x.b)("contacts/addSuccess"),at=Object(x.b)("contacts/addError"),st=Object(x.b)("contacts/deletePending"),ut=Object(x.b)("contacts/deleteSuccess"),it=Object(x.b)("contacts/deleteError"),ot=function(t){return function(e){return e(tt()),function(t){return L("".concat(F,"/contacts"),{},t)}(t).then((function(t){return e(et(t))})).catch((function(t){return e(nt(t.message))}))}},lt=function(t){var e=t.contact,n=t.token;return function(t){return t(ct()),function(t,e){return L("".concat(F,"/contacts"),{method:"POST",body:JSON.stringify(t)},e)}(e,n).then((function(e){return t(rt(e))})).catch((function(e){return t(at(e.message))}))}},jt=function(t){var e=t.id,n=t.token;return function(t){return t(st()),function(t,e){return L("".concat(F,"/contacts/").concat(t),{method:"DELETE"},e)}(e,n).then((function(n){return t(ut(e))})).catch((function(e){return t(it(e.message))}))}},bt=Object(x.b)("filter/update"),dt=n(20),Ot=function(t){return t.contactsReducer.items.contactItems},ht=function(t){return t.contactsReducer.filter},ft=Object(dt.a)([Ot,ht],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))})),mt={getContacts:Object(dt.a)([Ot],(function(t){return t})),getFilter:Object(dt.a)([ht],(function(t){return t})),getFilteredContacts:ft};var pt=function(){var t=Object(s.c)(mt.getContacts),e=Object(s.c)(mt.getFilteredContacts),n=Object(s.c)(mt.getFilter),r=Object(s.c)(j.authToken),a=Object(s.b)();return Object(c.useEffect)((function(){a(ot(r))}),[r,a]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook"}),Object(b.jsx)($,{onSubmit:function(e){t.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))?alert("Error! Can not add existing contact."):a(lt({contact:e,token:r}))}}),e.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Contacts"}),Object(b.jsx)(Y,{filter:n,handleFilter:function(t){return e=t.currentTarget.value,a(bt(e));var e}}),Object(b.jsx)(V,{filter:n,contacts:e,onDeleteContact:function(t){return a(jt({id:t,token:r}))}})]})]})};n(61);var xt=function(){var t=Object(s.c)(j.isAuthorized),e=Object(s.c)(j.authToken),n=Object(s.c)(j.currentUser),c=Object(s.b)();return Object(b.jsxs)("nav",{className:"nav",children:[Object(b.jsxs)("div",{className:"conteinerNav",children:[!t&&Object(b.jsx)(u.b,{to:"/login",children:Object(b.jsx)("div",{className:"navElement",children:"Login"})}),!t&&Object(b.jsx)(u.b,{to:"/register",children:Object(b.jsx)("div",{className:"navElement",children:"Register"})}),t&&Object(b.jsx)(u.b,{to:"/contacts",children:Object(b.jsx)("div",{className:"navElement",children:"Contacts"})}),t&&Object(b.jsx)("button",{onClick:function(){return c(z(e))},className:"navElement btnLogOut",children:"Log Out"})]}),t&&Object(b.jsxs)("h1",{className:"userName",children:["Email : ",n.email]})]})};var gt,vt,Nt,Et,yt,wt,Ct,kt=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(xt,{}),Object(b.jsx)(f,{path:"/",exact:!0,children:Object(b.jsx)(m,{})}),Object(b.jsx)(f,{path:"/register",exact:!0,restricted:!0,children:Object(b.jsx)(B,{})}),Object(b.jsx)(f,{path:"/login",exact:!0,restricted:!0,children:Object(b.jsx)(q,{})}),Object(b.jsx)(h,{path:"/contacts",exact:!0,children:Object(b.jsx)(pt,{})})]})},St=n(10),It=n(3),Tt=Object(x.c)(null,(gt={},Object(It.a)(gt,v,(function(t,e){return e.payload.user})),Object(It.a)(gt,y,(function(t,e){return e.payload.user})),Object(It.a)(gt,k,(function(){return null})),gt)),At=Object(x.c)(null,(vt={},Object(It.a)(vt,v,(function(t,e){return e.payload.token})),Object(It.a)(vt,y,(function(t,e){return e.payload.token})),Object(It.a)(vt,k,(function(){return null})),vt)),Ft=Object(x.c)(!1,(Nt={},Object(It.a)(Nt,v,(function(){return!0})),Object(It.a)(Nt,y,(function(){return!0})),Object(It.a)(Nt,k,(function(){return!1})),Nt)),Lt=Object(x.c)(null,(Et={},Object(It.a)(Et,N,(function(t,e){return e.payload})),Object(It.a)(Et,w,(function(t,e){return e.payload})),Object(It.a)(Et,S,(function(t,e){return e.payload})),Et)),Pt=Object(St.b)({currentUser:Tt,token:At,isAuthorized:Ft,authError:Lt}),_t=Object(x.c)("",Object(It.a)({},bt,(function(t,e){var n;return null!==(n=e.payload)&&void 0!==n?n:""}))),Rt=n(34),zt=Object(x.c)([],(yt={},Object(It.a)(yt,et,(function(t,e){return e.payload})),Object(It.a)(yt,rt,(function(t,e){return[].concat(Object(Rt.a)(t),[e.payload])})),Object(It.a)(yt,ut,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),yt)),Ut=Object(x.c)(!1,(wt={},Object(It.a)(wt,tt,(function(){return!0})),Object(It.a)(wt,ct,(function(){return!0})),Object(It.a)(wt,st,(function(){return!0})),Object(It.a)(wt,et,(function(){return!1})),Object(It.a)(wt,nt,(function(){return!1})),Object(It.a)(wt,rt,(function(){return!1})),Object(It.a)(wt,at,(function(){return!1})),Object(It.a)(wt,ut,(function(){return!1})),Object(It.a)(wt,it,(function(){return!1})),wt)),qt=Object(x.c)(null,(Ct={},Object(It.a)(Ct,nt,(function(t,e){return e.payload})),Object(It.a)(Ct,at,(function(t,e){return e.payload})),Object(It.a)(Ct,it,(function(t,e){return e.payload})),Object(It.a)(Ct,ct,(function(){return null})),Object(It.a)(Ct,tt,(function(){return null})),Object(It.a)(Ct,st,(function(){return null})),Ct)),Dt=Object(St.b)({contactItems:zt,isPending:Ut,contactsError:qt}),Bt=Object(St.b)({items:Dt,filter:_t,auth:Pt}),Jt=Object(x.a)({reducer:{contactsReducer:Bt}});a.a.render(Object(b.jsx)(c.StrictMode,{children:Object(b.jsx)(s.a,{store:Jt,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(kt,{})})})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.299a7188.chunk.js.map